# <a name="Home"></a> JetBrains MPS Intro

## Table of Content:
- [Intro](#intro)
- [Знакомство с MPS. Концепты](#concept)

![](./img/DSL_logo.png)
## [↑](#Home) <a name="intro"></a> Intro
Предлагаю окунуться в дебри одной интересной темы. Представим себе программиста Василия, к которому обратился кто-то (назовём его заказчиком) с просьбой написать калькулятор некоторых величин. Программист вынужден вникнуть в то, какие величины нужно посчитать заказчику и для чего и реализовать это. Далее, появился другой заказчик, который захотел в калькулятор добавить что-то. А потом это повторялось снова и снова. И тогда Василий подумал, что было бы здорово, чтобы заказчик мог сам смог сделать то, что он хочет, не трогая программиста. Было бы здорово, чтобы заказчик говоря в терминах своей предметной области смог не умея программировать как-то получить результат. И тогда на помощь решил прийти JetBrains MPS:
![](./img/MPS_aim.png)
Таким образом JetBrains MPS позволяет предоставить заказчику понятный этому заказчику предметно-ориентирированный язык (DSL - Domain-specific Language), на котором заказчик может описать свою задачу и получить результат. На эту тему можно посмотреть короткий промо ролик от JetBrains: [Intro Video of JetBrains MPS](https://www.youtube.com/watch?v=1yQ5kj6svRM).

Чтобы понять, как это работаем, воспользуемся официальным учебным материалом:
"[MPS Calculator Language Tutorial](https://www.jetbrains.com/help/mps/mps-calculator-language-tutorial.html)".

## [↑](#Home) <a name="concepts"></a> Знакомство с MPS. Концепты
Итак, нам понадобится с вами среда разработки - JetBrains MPS. Её можно скачать с официального сайта, из раздела: "[Download MPS](https://www.jetbrains.com/mps/download/#section=windows)".

Запускаем JetBrains MPS и создаём новый проект: "Create New Project".
Так как мы собираемся создавать Domain Specific Language, то очевидно, что нам нужно создать именно "Language Project".

Имя проекта (Project Name) укажем "Calculator". Название языка (Language Name) укажем в стиле, похожим на то, как мы именуем пакеты в Java: ru.javarush.calculator. Так же поставим галку на "Create Sandbox Solution". Sandbox Solution - это так называемая "песочница", в которой мы сможем протестировать наш язык. Нажимаем "ОК" и начинаем наш путь познания JetBrains MPS.

Структуру DSL, описываемого в JetBrains MPS, формируют так называемые концепты (concepts). Сгруппированные концепты формируют модель языка, описывающую структуру. Поэтому, в JetBrains MPS мы увидим в дереве на вкладке "Project", а в нём раздел "Structure".
В нём мы сейчас начнём описывать концепты, из которых состоит наш калькулятор.
И прежде всего, создадим концепт самого калькулятора. Для этого через контекстное меню модели "structure" (будет называть этот раздел в терминах MPS) выберем "New → Concept".
Вместо **"no name"** укажем название "Calculator".
Далее, сразу стоит запомнить (это действительно важно), что JetBrains MPS подобно IntelliJ Idea IDE умеет подсказывать варианты, которыми можно использовать в том или ином месте. Для этого нужно в месте, где нужна подсказка, нажать **Ctrl + Space**:
![](./img/ConceptInterfaceHint.png)
Выберем для концепта калькулятора интерфес INamedConcept, что будет означать, что наш концепт будет именованным. То есть будет иметь property с названием name, т.е. имя.
Узлы, представленные концептами, формируют дерево. Таким образом, нам нужен корневой узел. Этим корневым узлом будет наш калькулятор. Поэтому, поставим **"Instance can be root"** в значение true.
